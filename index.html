<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vitreum Hub</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1e1e28"/>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Vitreum Hub">
    <meta name="description" content="Unifica el acceso a los servicios digitales de la Universidad de Cuenca.">

    <!-- Manifest Link -->
    <link rel="manifest" href="manifest.json">

    <!-- Icon Links -->
    <link rel="apple-touch-icon" href="/img/icons/icon-192x192.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
</head>
<body>

    <!-- MODAL DE ERROR DE LOGIN -->
    <div id="login-error-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Acceso Restringido</h3>
            <p id="login-error-modal-message">Debes usar una cuenta de correo institucional (@ucuenca.edu.ec) para poder acceder.</p>
            <button id="login-error-modal-close" class="modal-btn primary" style="width:100%;">Entendido</button>
        </div>
    </div>

    <!-- MODAL DE REDIRECCIÓN A ENOVA -->
    <div id="enova-redirect-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-icon-wrapper">
                <i data-lucide="external-link"></i>
            </div>
            <h3>Redirección Segura</h3>
            <p>Estás a punto de ser dirigido al portal oficial de Enova (Moodle) para iniciar sesión. Vitreum Hub no gestiona tus credenciales.</p>
            <div class="modal-actions">
                <button id="enova-redirect-cancel" class="modal-btn secondary">Cancelar</button>
                <button id="enova-redirect-confirm" class="modal-btn primary">Continuar</button>
            </div>
        </div>
    </div>

    <!-- SPLASH SCREEN -->
    <div id="splash-screen">
        <!-- Contenedor para los videos -->
        <div class="splash-video-container">
            <video id="splash-video-1" class="splash-video" preload="auto" muted playsinline>
                <source src="./img/video1.mp4" type="video/mp4">
                Tu navegador no soporta el tag de video.
            </video>
            <video id="splash-video-2" class="splash-video" preload="auto" muted playsinline>
                <source src="./img/video2.mp4" type="video/mp4">
                Tu navegador no soporta el tag de video.
            </video>
        </div>
        <div class="focus-wave"></div>
        <p class="loading-text"></p>
    </div>

    <!-- ONBOARDING SCREEN -->
    <div id="onboarding-screen">
        <div class="onboarding-window">
             <div class="window-header">
                <div class="window-controls">
                    <span class="control-btn close"></span>
                    <span class="control-btn minimize"></span>
                    <span class="control-btn maximize"></span>
                </div>
                <div id="onboarding-title" class="window-title-text">Bienvenida</div>
            </div>
            <div class="onboarding-content-area">
                <!-- Welcome Card -->
                <div id="welcome-card" class="onboarding-card active">
                    <h3>Bienvenido a Vitreum Hub</h3>
                    <div class="onboarding-card-body">
                        <div class="onboarding-text-content">
                            <p>Nuestro objetivo es simplificar y unificar el acceso a los servicios digitales de la Universidad de Cuenca para todos los estudiantes.</p>
                            <div class="onboarding-actions">
                                <button id="next-btn" class="onboarding-btn primary">Siguiente</button>
                            </div>
                        </div>
                        <div class="onboarding-image-container" style="background-image: url('/img/inicio2.gif');">
                             <!-- La imagen ahora es un fondo de este div, no se necesita la etiqueta img -->
                        </div>
                    </div>
                </div>
                <!-- Agreement Card -->
                <div id="agreement-card" class="onboarding-card">
                    <h3>Acuerdo de Usuario</h3>
                    <div class="onboarding-card-body">
                        <div class="onboarding-text-content">
                            <p class="disclaimer-text">
                                Esta aplicación es un proyecto independiente y <strong>no es una plataforma oficial</strong> de la Universidad de Cuenca. Las marcas y logos utilizados son propiedad de la universidad. Al continuar, aceptas usar esta herramienta bajo tu propia responsabilidad.
                            </p>
                            <div class="onboarding-actions">
                                <button id="deny-btn" class="onboarding-btn secondary">Denegar</button>
                                <button id="accept-btn" class="onboarding-btn primary">Aceptar y Continuar</button>
                            </div>
                        </div>
                        <div class="onboarding-image-container" style="background-image: url('/img/terminos.gif');">
                             <!-- La imagen ahora es un fondo de este div, no se necesita la etiqueta img -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- LOGIN SCREEN -->
    <div id="login-screen">
        <div class="login-art-container">
            <div class="login-art-shape shape1"></div>
            <div class="login-art-shape shape2"></div>
        </div>
        <div class="login-container widget">
            <h1 class="login-logo">VITREUM</h1>
            <h2>Acceso Estudiantil</h2>
            <p>Usa tu cuenta institucional para ingresar al ecosistema.</p>
            <button id="google-login-btn" class="google-login-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.19,4.73C14.03,4.73 15.6,5.36 16.81,6.45L18.87,4.59C17.01,3.01 14.7,2 12.19,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.19,22C17.6,22 21.54,18.33 21.54,12.29C21.54,11.77 21.48,11.44 21.35,11.1Z"/></svg>
                <span>Seleccionar cuenta de Google</span>
            </button>
        </div>
    </div>
    
    <!-- RESUME SESSION SCREEN -->
    <div id="resume-screen">
        <div class="login-art-container">
            <div class="login-art-shape shape1"></div>
            <div class="login-art-shape shape2"></div>
        </div>
        <div class="resume-container widget">
            <img id="resume-profile-pic" src="https://placehold.co/120x120/1e1e28/f0f0f0?text=?" alt="Foto de perfil" class="resume-profile-pic">
            <h2 id="resume-display-name">Cargando...</h2>
            <p>¡Hola de nuevo!</p>
            <div class="resume-actions">
                <button id="resume-btn" class="onboarding-btn primary">Reanudar Sesión</button>
                <button id="resume-logout-btn" class="onboarding-btn secondary">Cerrar Sesión</button>
            </div>
        </div>
    </div>


    <!-- SETUP SCREEN -->
    <div id="setup-screen">
        <div class="setup-container widget">
            <h3>Configuración Inicial</h3>
            <p>Personaliza tu perfil antes de continuar.</p>
            
            <div class="profile-editor">
                <label for="profile-pic-input" class="profile-pic-label">
                    <img id="setup-profile-pic" src="https://placehold.co/120x120/1e1e28/f0f0f0?text=?" alt="Foto de perfil">
                    <div class="pic-overlay"><i data-lucide="camera"></i></div>
                </label>
                <input type="file" id="profile-pic-input" accept="image/*">
                <input type="text" id="setup-display-name" class="setup-input" placeholder="Tu nombre para mostrar">
            </div>

            <div class="early-access-card">
                <div class="icon-wrapper"><i data-lucide="shield-alert"></i></div>
                <div class="text-wrapper">
                    <h4>Acceso Anticipado</h4>
                    <p>Esta versión es gratuita. Futuras versiones podrían tener funciones premium.</p>
                </div>
            </div>

            <button id="finish-setup-btn" class="onboarding-btn primary">Finalizar y Entrar</button>
        </div>
    </div>

    <!-- APP WRAPPER -->
    <div id="app-wrapper">
        <!-- Mobile Nav (previously top-nav) -->
        <nav class="mobile-nav">
            <div class="nav-glass-container">
                <ul>
                    <li><a href="#" class="nav-link active" data-target="summary-content"><i data-lucide="layout-grid"></i><span>Resumen</span></a></li>
                    <li><a href="#" class="nav-link" data-target="services-content"><i data-lucide="briefcase"></i><span>Servicios</span></a></li>
                    <li><a href="#" class="nav-link" data-target="apps-content"><i data-lucide="app-window"></i><span>Apps</span></a></li>
                    <li><a href="#" class="nav-link" data-target="settings-content"><i data-lucide="settings"></i><span>Ajustes</span></a></li>
                </ul>
            </div>
        </nav>
        
        <main class="main-container">
            <!-- Window Header with integrated Desktop Nav -->
            <div class="window-header">
                <div class="window-controls">
                    <span class="control-btn close"></span>
                    <span class="control-btn minimize"></span>
                    <span class="control-btn maximize"></span>
                </div>
                <div id="window-title" class="window-title-text">Resumen</div>
                <div class="header-actions">
                    <button id="menu-btn" class="menu-btn">
                        <i data-lucide="menu"></i>
                    </button>
                    <nav id="desktop-nav-container" class="desktop-nav-container">
                         <ul>
                            <li><a href="#" class="nav-link active" data-target="summary-content"><span>Resumen</span></a></li>
                            <li><a href="#" class="nav-link" data-target="services-content"><span>Servicios</span></a></li>
                            <li><a href="#" class="nav-link" data-target="apps-content"><span>Apps</span></a></li>
                            <li><a href="#" class="nav-link" data-target="settings-content"><span>Ajustes</span></a></li>
                        </ul>
                    </nav>
                </div>
            </div>

            <div class="content-area">
                <div id="summary-content" class="page-content active">
                    <div class="dashboard-grid">
                        <div class="widget clock-widget"><div id="clock-time">17:01</div><div id="clock-date">Tuesday, 24 Oct</div></div>
                        <div class="widget updates-widget">
                            <h3>Últimas Actualizaciones</h3>
                            <pre><code id="updates-log">Cargando actualizaciones...</code></pre>
                        </div>
                        <div class="widget mindfulness-stats">
                            <h3>Acceso Ucuenca</h3>
                            <p class="subtitle">Inicio Ultra Rápido</p>
                            <br>
                            <div class="stats-grid">
                                <div class="stat-item"><span class="label">E-learning</span><span class="value">Moodle</span></div>
                            </div>
                            <div id="enova-login-btn" class="app-open-button" style="width: 100%; margin-top: 15px;">
                                Iniciar Sesión
                            </div>
                        </div>
                        <div class="widget charging-stats">
                            <h3>Estado del sistema</h3><p class="subtitle">Estado de los servicios Ucuenca</p>
                            <br>
                            <div class="progress-circle" data-progress="100"><svg viewBox="0 0 100 100"><circle class="progress-bg" cx="50" cy="50" r="45"></circle><circle class="progress-bar" cx="50" cy="50" r="45"></circle></svg><span class="progress-text">100%</span></div>
                            <br>
                            <div class="charge-toggle"><div class="icon-wrapper"><i data-lucide="zap"></i></div><span>Optimo 👌</span></div>
                        </div>
                        <div class="widget profile-card">
                            <div class="profile-main">
                                <div class="profile-picture">
                                    <img class="user-profile-pic" src="https://placehold.co/120x120/ffffff/1e1e28?text=U" alt="User's profile picture">
                                </div>
                                <h2 class="user-display-name">Usuario</h2>
                            </div>
                            <ul class="profile-info-list">
                                <li><span>Email</span><strong class="user-email">correo@ejemplo.com</strong></li>
                                <li><span>U. Educativa</span><strong>U. de Cuenca</strong></li>
                                <li><span>Membresía</span><strong class="user-license log-success">Acceso Anticipado</strong></li>
                            </ul>
                            <div class="profile-nav">
                                <button id="logout-btn" class="nav-icon" title="Cerrar Sesión"><i data-lucide="log-out"></i></button>
                                <button class="nav-icon" title="Modo Foco"><i data-lucide="monitor-smartphone"></i></button>
                                <a href="https://gemini.google.com/" target="_blank" class="nav-icon" title="Abrir Google Gemini"><i data-lucide="sparkles"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="apps-content" class="page-content">
                    <h1 class="page-title">Ecosistema Vitreum</h1>
                    <div class="apps-grid">
                        <div class="widget app-card">
                            <div class="app-preview-image"><img src="https://placehold.co/400x200/333/fff?text=Studi.App" alt="Studi.App Builder"></div>
                            <div class="app-info"><h3>Studi.App Builder</h3><p>Crea y personaliza recursos educativos interactivos.</p></div>
                            <a href="#" target="_blank" class="app-open-button">Abrir Builder</a>
                        </div>
                        <div class="widget app-card">
                            <div class="app-preview-image"><img src="https://placehold.co/400x200/444/fff?text=QuantumNotes" alt="QuantumNotes"></div>
                            <div class="app-info"><h3>QuantumNotes</h3><p>Toma de apuntes inteligente con IA integrada.</p></div>
                            <a href="#" target="_blank" class="app-open-button">Abrir Notas</a>
                        </div>
                    </div>
                </div>
                <!-- SECCIÓN DE SERVICIOS - MODIFICADA -->
                <div id="services-content" class="page-content">
                    <h1 class="page-title">Servicios Universitarios</h1>
                    
                    <!-- Categoría: Servicios Internos -->
                    <div class="services-category">
                        <h2 class="category-title">Servicios Internos</h2>
                        <div class="apps-grid">
                            <div class="widget app-card">
                                <div class="app-preview-image"><img src="
    https://www.ucuenca.edu.ec/wp-content/uploads/2025/03/Banner_Experience_2.gif" alt="Nova SGA"></div>
                                <div class="app-info"><h3>Nova (SGA)</h3><p>Consulta tus notas, materias y recursos académicos.</p></div>
                                <a href="#" target="_blank" class="app-open-button">Ir a Nova</a>
                            </div>
                            <div class="widget app-card">
                                <div class="app-preview-image"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT0Hu2uFyAz4ubdDuohtQ3MoKFBm5ZxOcM1iA&s" alt="Enova Moodle"></div>
                                <div class="app-info"><h3>eNOVA (Moodle)</h3><p>Plataforma de e-learning para tus cursos.</p></div>
                                <a href="#" target="_blank" class="app-open-button">Ir a eNOVA</a>
                            </div>
                            <div class="widget app-card">
                                <div class="app-preview-image"><img src="https://platform.theverge.com/wp-content/uploads/sites/2/chorus/uploads/chorus_asset/file/21939811/newgmaillogo.jpg?quality=90&strip=all&crop=0,0,100,100" alt="Correo Institucional"></div>
                                <div class="app-info"><h3>Correo Institucional</h3><p>Acceso directo a tu bandeja de entrada de Gmail.</p></div>
                                <a href="#" target="_blank" class="app-open-button">Abrir Correo</a>
                            </div>
                            <div class="widget app-card">
                                <div class="app-preview-image"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSXEk26yJKOSf2w4CziuP2VOdfeCdlBC5jesg&s" alt="Correo Institucional"></div>
                                <div class="app-info"><h3>Portal de servicios</h3><p>Acceso a silabos e informacion general</p></div>
                                <a href="#" target="_blank" class="app-open-button">Abrir Portal</a>
                            </div>
                            <div class="widget app-card">
                                <div class="app-preview-image"><img src="https://www.ucuenca.edu.ec/wp-content/uploads/2025/01/DSC07459.jpg" alt="Correo Institucional"></div>
                                <div class="app-info"><h3>Biblioteca Digital</h3><p>Acceso directo biblioteca</p></div>
                                <a href="#" target="_blank" class="app-open-button">Abrir Pagina web</a>
                            </div>
                        </div>
                    </div>

                    <!-- Categoría: Documentos Generales -->
                    <div class="services-category">
                        <h2 class="category-title">Documentos Generales</h2>
                        <div class="apps-grid">
                            <div class="widget app-card">
                                <div class="app-preview-image"><img src="https://placehold.co/400x200/009688/fff?text=Reglamento" alt="Reglamento Estudiantil"></div>
                                <div class="app-info"><h3>Reglamento Estudiantil</h3><p>Consulta las normativas y derechos estudiantiles.</p></div>
                                <a href="#" target="_blank" class="app-open-button">Ver Documento</a>
                            </div>
                            <div class="widget app-card">
                                <div class="app-preview-image"><img src="https://placehold.co/400x200/FF9800/fff?text=Calendario" alt="Calendario Académico"></div>
                                <div class="app-info"><h3>Calendario Académico</h3><p>Fechas importantes, periodos de matrícula y exámenes.</p></div>
                                <a href="#" target="_blank" class="app-open-button">Ver Calendario</a>
                            </div>
                             <div class="widget app-card">
                                <div class="app-preview-image"><img src="https://placehold.co/400x200/795548/fff?text=Biblioteca" alt="Biblioteca"></div>
                                <div class="app-info"><h3>Biblioteca Virtual</h3><p>Busca y accede a la base de datos de la biblioteca.</p></div>
                                <a href="#" target="_blank" class="app-open-button">Buscar Libros</a>
                            </div>
                        </div>
                    </div>

                    <!-- Categoría: Redes Sociales -->
                     <div class="services-category">
                        <h2 class="category-title">Redes Sociales</h2>
                        <div class="apps-grid">
                            <div class="widget app-card">
                                <div class="app-preview-image"><img src="https://placehold.co/400x200/3b5998/fff?text=Facebook" alt="Facebook"></div>
                                <div class="app-info"><h3>Facebook</h3><p>Mantente al día con las noticias y eventos oficiales.</p></div>
                                <a href="https://www.facebook.com/ucuenca" target="_blank" class="app-open-button">Seguir en Facebook</a>
                            </div>
                            <div class="widget app-card">
                                <div class="app-preview-image"><img src="https://placehold.co/400x200/e4405f/fff?text=Instagram" alt="Instagram"></div>
                                <div class="app-info"><h3>Instagram</h3><p>Descubre el día a día de la comunidad universitaria.</p></div>
                                <a href="https://www.instagram.com/udecuenca/#" target="_blank" class="app-open-button">Seguir en Instagram</a>
                            </div>
                             <div class="widget app-card">
                                <div class="app-preview-image"><img src="https://placehold.co/400x200/000000/fff?text=X" alt="X (Twitter)"></div>
                                <div class="app-info"><h3>X (Twitter)</h3><p>Comunicados y actualizaciones importantes al instante.</p></div>
                                <a href="https://twitter.com/udecuenca" target="_blank" class="app-open-button">Seguir en X</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="settings-content" class="page-content">
                    <h1 class="page-title">Ajustes</h1>
                    <div class="settings-section">
                        <div id="mobile-profile-card" class="widget profile-card">
                             <div class="profile-main">
                                <div class="profile-picture">
                                    <img class="user-profile-pic" src="https://placehold.co/120x120/ffffff/1e1e28?text=U" alt="User's profile picture">
                                </div>
                                <h2 class="user-display-name">Usuario</h2>
                            </div>
                            <ul class="profile-info-list">
                                <li><span>Email</span><strong class="user-email">correo@ejemplo.com</strong></li>
                                <li><span>U. Educativa</span><strong>U. de Cuenca</strong></li>
                                <li><span>Membresía</span><strong class="user-license log-success">Acceso Anticipado</strong></li>
                            </ul>
                            <div class="profile-nav">
                                <button class="nav-icon logout-btn-mobile" title="Cerrar Sesión"><i data-lucide="log-out"></i></button>
                                <button class="nav-icon" title="Modo Foco"><i data-lucide="monitor-smartphone"></i></button>
                                <a href="https://gemini.google.com/" target="_blank" class="nav-icon" title="Abrir Google Gemini"><i data-lucide="sparkles"></i></a>
                            </div>
                        </div>
                        
                        <div class="settings-card">
                            <h3>Personalizar Fondo</h3>
                            <p style="color: var(--text-color-secondary); margin-bottom: 15px;">Elige una imagen de tu dispositivo para usarla como fondo.</p>
                            <label for="background-file-input" class="file-upload-btn">
                                <i data-lucide="image"></i>
                                Seleccionar Imagen
                            </label>
                            <input type="file" id="background-file-input" accept="image/*">
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Lógica de la Aplicación -->
    <script type="module" src="script.js"></script>

    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registrado con éxito:', registration);
                    })
                    .catch(error => {
                        console.log('Error al registrar el Service Worker:', error);
                    });
            });
        }
    </script>
</body>
</html>
